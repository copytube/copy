<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>추천영상등록 - Copytube</title>
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    connect-src 'self' https://www.googleapis.com https://firestore.googleapis.com https://securetoken.googleapis.com https://identitytoolkit.googleapis.com https://www.gstatic.com https://www.youtube.com;
    img-src 'self' data: https://i.ytimg.com;
    frame-src https://www.youtube.com;
    script-src 'self' https://www.gstatic.com 'unsafe-inline';
    style-src 'self' 'unsafe-inline';
    object-src 'none';
    base-uri 'self';
  ">
  <link rel="stylesheet" href="css/style.css"/>
</head>
<body class="uploader">
  <header id="topbar">
    <div class="brand">
      <a id="brandHome" href="./" aria-label="CopyTube 홈으로">
        <img class="brand-logo" src="image/copytube_logo_side.png" alt="CopyTube"/>
      </a>
    </div>
    <div class="right" style="position:relative;">
      <a id="signupLink" class="link" href="signup.html">Sign up</a>
      <a id="signinLink" class="link" href="signin.html">Sign in</a>
      <span id="welcome" class="welcome"></span>
      <button id="menuBtn" class="icon hidden" aria-label="menu">三</button>
      <div id="dropdownMenu" class="dropdown hidden" role="menu" aria-hidden="true">
        <button id="btnAbout"      type="button">CopyTube는..</button>
        <button id="btnMyUploads"  type="button">내영상관리</button>
        <button id="btnSignOut"    type="button">Sign out</button>
        <button id="btnGoUpload"   class="menu-strong" type="button">추천영상등록</button>
      </div>
    </div>
  </header>

  <main class="intro" style="align-items:flex-start; padding-top:96px;">
    <div style="max-width:900px; width:100%; text-align:left; margin:0 auto;">
      <h2 style="margin:0 0 8px;">추천영상 등록</h2>

      <!-- URL 입력 -->
      <label style="display:block;margin-top:8px;">YouTube 공유 URL (여러 줄 가능)
        <textarea id="url" rows="3" placeholder="https://youtu.be/... (한 줄에 1개씩)" style="width:100%;padding:10px;margin-top:6px;border-radius:8px;border:1px solid #333;background:#000;color:#fff;"></textarea>
      </label>

      <!-- 컨트롤 줄: 라디오(세로) + 붙여넣기 + 등록 -->
      <div class="controls-row">
        <div class="controls-col">
          <div class="radio-stack">
            <label><input type="radio" name="order" value="bottom" checked> 아래부터 등록</label>
            <label><input type="radio" name="order" value="top"> 위부터 등록</label>
          </div>
        </div>
        <button id="btnPaste" class="btn-clipboard" type="button">클립보드 붙여넣기</button>
        <button id="btnSubmitTop" class="btn-submit" type="button">등록</button>
      </div>

      <!-- 접히는 도움말(삼각형 토글 유지) -->
      <details id="pasteHelp" style="margin:6px 0 12px;">
        <summary>붙여넣기 도움말</summary>
        <div class="help-body" style="font-size:13px; color:#cfcfcf; margin-top:6px; line-height:1.5;">
          • <b>URL 입력칸</b>에 직접 붙여넣거나, <b>오른쪽 “클립보드 붙여넣기”</b> 버튼을 사용하세요. (브라우저/OS 허용 필요)<br/>
          • <b>URL다중등록:</b> URL 입력칸에 <b>한 줄에 1개의 URL</b>을 붙여넣고, <b>카테고리 선택 후 “등록”</b>을 누르면 한 번에 모두 등록됩니다.<br/>
          • 위의 <b>“아래부터/위부터 등록”</b> 옵션으로 등록 순서를 결정합니다. (피드가 최신순이라 시리즈는 보통 <b>아래부터 등록</b>해야 차례대로 보여집니다.)<br/><br/>
          • <b>HTTPS</b> 환경에서만 동작합니다. (GitHub Pages OK)<br/>
          • <b>iPhone/iPad (iOS 16+)</b>: 처음 붙여넣기 때 <i>“이 앱에서 붙여넣기 허용”</i> 팝업에서 <b>허용</b> 선택<br/>
          • <b>안드로이드/데스크탑 Chrome</b>: <b>설정 → 사이트 설정 → 클립보드</b>에서 <code>https://copytube.github.io</code>를 <b>허용</b>으로 변경<br/>
          • 또는 <b>길게 누르기 → 붙여넣기</b> 또는 <code>Ctrl/⌘+V</code> 사용<br/><br/>
          • <b>개인자료</b>는 로컬저장소에만 저장되며 공유되지 않습니다. 이름 변경 가능, 카테고리 위치 상단으로 변경 가능(카테고리 선택 화면에서).
        </div>
      </details>

      <!-- 안내문: 카테고리 선택 위로 -->
      <p id="maxNote" class="welcome" style="margin:2px 0 6px; color:#9aa0a6;">
        카테고리는 <b>최대 3개</b>까지 선택 가능합니다.
      </p>

      <!-- 카테고리 그룹 -->
      <div id="cats"><!-- JS 렌더 --></div>

      <!-- 제출 하단 버튼/메시지 -->
      <div style="display:flex; gap:8px; align-items:center; margin:10px 0 0;">
        <button id="btnSubmit" class="btn-submit" type="button">등록</button>
        <div id="msg" class="welcome" style="min-height:1.2em;"></div>
      </div>
    </div>
  </main>

  <script type="module" src="js/firebase-init.js"></script>
  <script type="module" src="js/auth.js"></script>
  <script type="module" src="js/upload.js?v=20250821"></script>
</body>
</html>
